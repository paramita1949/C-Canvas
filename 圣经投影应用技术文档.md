# åœ£ç»æŠ•å½±åº”ç”¨æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
**BibleProjector** - åŸºäº WPF çš„åœ£ç»æŠ•å½±åº”ç”¨

### é¡¹ç›®æè¿°
è¿™æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åœ£ç»ç»æ–‡æŠ•å½±åº”ç”¨ï¼Œæ”¯æŒå’Œåˆæœ¬ä¿®è®¢ç‰ˆï¼ˆB13ç‰ˆæœ¬ï¼‰ï¼Œæä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢å’Œæµç•…çš„æŠ•å½±ä½“éªŒã€‚åº”ç”¨é‡‡ç”¨åŒçª—å£æ¨¡å¼ï¼šæ§åˆ¶çª—å£ç”¨äºé€‰æ‹©å’Œç®¡ç†ç»æ–‡ï¼ŒæŠ•å½±çª—å£ç”¨äºå…¨å±æ˜¾ç¤ºç»æ–‡å†…å®¹ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ… ä¹¦å·ç« èŠ‚å¿«é€Ÿå¯¼èˆªï¼ˆæ—§çº¦/æ–°çº¦åˆ†ç»„ï¼‰
- âœ… ç»æ–‡é€èŠ‚æ˜¾ç¤ºå’ŒæŠ•å½±
- âœ… ç« èŠ‚æ ‡é¢˜è‡ªåŠ¨æ˜¾ç¤º
- âœ… å…¨å±æŠ•å½±æ¨¡å¼ï¼ˆå¤šæ˜¾ç¤ºå™¨æ”¯æŒï¼‰
- âœ… é”®ç›˜å¿«æ·é”®æ“ä½œ
- âœ… ç»æ–‡æœç´¢åŠŸèƒ½
- âœ… å†å²è®°å½•å’Œæ”¶è—å¤¹
- âœ… è‡ªå®šä¹‰æŠ•å½±æ ·å¼

### æŠ€æœ¯ç‰¹ç‚¹
- é‡‡ç”¨ MVVM è®¾è®¡æ¨¡å¼
- Material Design ç°ä»£åŒ–ç•Œé¢
- SQLite æœ¬åœ°æ•°æ®åº“
- ä¾èµ–æ³¨å…¥æ¶æ„
- å“åº”å¼è®¾è®¡

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å¼€å‘ç¯å¢ƒ
| å·¥å…· | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Visual Studio | 2022 | IDE |
| .NET | 6.0 / 7.0 | è¿è¡Œæ—¶æ¡†æ¶ |
| C# | 10.0+ | ç¼–ç¨‹è¯­è¨€ |
| Windows | 10/11 | ç›®æ ‡æ“ä½œç³»ç»Ÿ |

### æ ¸å¿ƒæŠ€æœ¯æ¡†æ¶
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| WPF | .NET 6.0+ | UI æ¡†æ¶ |
| System.Data.SQLite | 1.0.118 | SQLite æ•°æ®åº“è®¿é—® |
| CommunityToolkit.Mvvm | 8.2.2 | MVVM æ¡†æ¶ |
| MaterialDesignThemes | 4.9.0 | UI æ§ä»¶åº“ |
| MaterialDesignColors | 2.1.4 | é…è‰²æ–¹æ¡ˆ |
| Microsoft.Extensions.DependencyInjection | 7.0.0 | ä¾èµ–æ³¨å…¥ |

### æ•°æ®åº“
- **ç±»å‹**: SQLite 3
- **æ–‡ä»¶**: `bible.db`
- **ç‰ˆæœ¬**: B13 (å’Œåˆæœ¬ä¿®è®¢ç‰ˆ)
- **æ›´æ–°æ—¥æœŸ**: 2025-04-03

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
BibleProjector/
â”‚
â”œâ”€â”€ BibleProjector.sln                      # Visual Studio è§£å†³æ–¹æ¡ˆæ–‡ä»¶
â”‚
â”œâ”€â”€ BibleProjector.Core/                    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ Models/                             # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ BibleVerse.cs                  # ç»æ–‡æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ BookInfo.cs                    # ä¹¦å·ä¿¡æ¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ChapterTitle.cs                # ç« èŠ‚æ ‡é¢˜æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ SearchResult.cs                # æœç´¢ç»“æœæ¨¡å‹
â”‚   â”‚   â””â”€â”€ ProjectionSettings.cs          # æŠ•å½±è®¾ç½®æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ Services/                           # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ BibleDataService.cs            # æ•°æ®è®¿é—®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ BookNameService.cs             # ä¹¦å·åç§°æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ SearchService.cs               # æœç´¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ HistoryService.cs              # å†å²è®°å½•æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ FavoriteService.cs             # æ”¶è—å¤¹æœåŠ¡
â”‚   â”‚   â””â”€â”€ SettingsService.cs             # è®¾ç½®ç®¡ç†æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ Data/                               # æ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ bible.db                       # SQLite æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ history.db                     # å†å²è®°å½•æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ settings.json                  # é…ç½®æ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ Utilities/                          # å·¥å…·ç±»
â”‚       â”œâ”€â”€ DatabaseHelper.cs              # æ•°æ®åº“è¾…åŠ©ç±»
â”‚       â””â”€â”€ StringHelper.cs                # å­—ç¬¦ä¸²å¤„ç†ç±»
â”‚
â”œâ”€â”€ BibleProjector.UI/                      # WPF ç”¨æˆ·ç•Œé¢å±‚
â”‚   â”œâ”€â”€ App.xaml                           # åº”ç”¨ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ App.xaml.cs                        # åº”ç”¨ç¨‹åºå¯åŠ¨é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ViewModels/                         # è§†å›¾æ¨¡å‹ï¼ˆMVVMï¼‰
â”‚   â”‚   â”œâ”€â”€ MainViewModel.cs               # ä¸»çª—å£ ViewModel
â”‚   â”‚   â”œâ”€â”€ ProjectionViewModel.cs         # æŠ•å½±çª—å£ ViewModel
â”‚   â”‚   â”œâ”€â”€ SearchViewModel.cs             # æœç´¢ ViewModel
â”‚   â”‚   â”œâ”€â”€ SettingsViewModel.cs           # è®¾ç½® ViewModel
â”‚   â”‚   â”œâ”€â”€ HistoryViewModel.cs            # å†å²è®°å½• ViewModel
â”‚   â”‚   â””â”€â”€ VerseItemViewModel.cs          # ç»æ–‡é¡¹ ViewModel
â”‚   â”‚
â”‚   â”œâ”€â”€ Views/                              # è§†å›¾ï¼ˆXAMLï¼‰
â”‚   â”‚   â”œâ”€â”€ MainWindow.xaml                # ä¸»æ§åˆ¶çª—å£
â”‚   â”‚   â”œâ”€â”€ MainWindow.xaml.cs
â”‚   â”‚   â”œâ”€â”€ ProjectionWindow.xaml          # æŠ•å½±çª—å£
â”‚   â”‚   â”œâ”€â”€ ProjectionWindow.xaml.cs
â”‚   â”‚   â”œâ”€â”€ SearchWindow.xaml              # æœç´¢çª—å£
â”‚   â”‚   â”œâ”€â”€ SearchWindow.xaml.cs
â”‚   â”‚   â”œâ”€â”€ SettingsWindow.xaml            # è®¾ç½®çª—å£
â”‚   â”‚   â””â”€â”€ SettingsWindow.xaml.cs
â”‚   â”‚
â”‚   â”œâ”€â”€ Controls/                           # è‡ªå®šä¹‰æ§ä»¶
â”‚   â”‚   â”œâ”€â”€ BookSelector.xaml              # ä¹¦å·é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ ChapterSelector.xaml           # ç« èŠ‚é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ VerseList.xaml                 # ç»æ–‡åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ VerseCard.xaml                 # ç»æ–‡å¡ç‰‡
â”‚   â”‚
â”‚   â”œâ”€â”€ Converters/                         # æ•°æ®è½¬æ¢å™¨
â”‚   â”‚   â”œâ”€â”€ VerseNumberConverter.cs        # èŠ‚å·è½¬æ¢å™¨
â”‚   â”‚   â”œâ”€â”€ BoolToVisibilityConverter.cs   # å¸ƒå°”è½¬å¯è§æ€§
â”‚   â”‚   â””â”€â”€ ColorConverter.cs              # é¢œè‰²è½¬æ¢å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ Behaviors/                          # è¡Œä¸º
â”‚   â”‚   â”œâ”€â”€ ScrollIntoViewBehavior.cs      # æ»šåŠ¨è¡Œä¸º
â”‚   â”‚   â””â”€â”€ KeyboardNavigationBehavior.cs  # é”®ç›˜å¯¼èˆªè¡Œä¸º
â”‚   â”‚
â”‚   â”œâ”€â”€ Styles/                             # æ ·å¼èµ„æº
â”‚   â”‚   â”œâ”€â”€ Colors.xaml                    # é¢œè‰²å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ Themes.xaml                    # ä¸»é¢˜æ ·å¼
â”‚   â”‚   â”œâ”€â”€ Buttons.xaml                   # æŒ‰é’®æ ·å¼
â”‚   â”‚   â””â”€â”€ TextBlocks.xaml                # æ–‡æœ¬æ ·å¼
â”‚   â”‚
â”‚   â””â”€â”€ Resources/                          # èµ„æºæ–‡ä»¶
â”‚       â”œâ”€â”€ Images/                        # å›¾ç‰‡èµ„æº
â”‚       â”‚   â”œâ”€â”€ icon.ico                   # åº”ç”¨å›¾æ ‡
â”‚       â”‚   â””â”€â”€ backgrounds/               # èƒŒæ™¯å›¾ç‰‡
â”‚       â””â”€â”€ Fonts/                         # å­—ä½“æ–‡ä»¶
â”‚
â””â”€â”€ BibleProjector.Tests/                   # å•å…ƒæµ‹è¯•é¡¹ç›®
    â”œâ”€â”€ Services/
    â”‚   â”œâ”€â”€ BibleDataServiceTests.cs
    â”‚   â””â”€â”€ SearchServiceTests.cs
    â””â”€â”€ ViewModels/
        â””â”€â”€ MainViewModelTests.cs
```

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ•°æ®åº“æ¦‚è§ˆ

#### bible.db (ä¸»æ•°æ®åº“)

**è¡¨1: Bible** - ç»æ–‡ä¸»è¡¨
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| Book | INT | NOT NULL | ä¹¦å·ç¼–å· (1-66) |
| Chapter | INT | NOT NULL | ç« èŠ‚å· |
| Verse | INT | NOT NULL | èŠ‚å· |
| Scripture | TEXT | NOT NULL | ç»æ–‡å†…å®¹ |

**ç´¢å¼•å»ºè®®**:
```sql
CREATE INDEX idx_bible_book_chapter ON Bible(Book, Chapter);
CREATE INDEX idx_bible_book_chapter_verse ON Bible(Book, Chapter, Verse);
CREATE INDEX idx_bible_scripture ON Bible(Scripture);
```

**è®°å½•æ•°**: 31,102 æ¡

---

**è¡¨2: Titles** - ç« èŠ‚æ ‡é¢˜è¡¨
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| Book | INT | NOT NULL | ä¹¦å·ç¼–å· |
| Chapter | INT | NOT NULL | ç« èŠ‚å· |
| Verse | INT | NOT NULL | æ ‡é¢˜èµ·å§‹èŠ‚å· |
| Scripture | TEXT | NOT NULL | æ ‡é¢˜å†…å®¹ |

**ç´¢å¼•å»ºè®®**:
```sql
CREATE INDEX idx_titles_book_chapter ON Titles(Book, Chapter);
```

**è®°å½•æ•°**: 2,652 æ¡

---

**è¡¨3: Chapters** - æ•´ç« å†…å®¹è¡¨
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| Book | INT | NOT NULL | ä¹¦å·ç¼–å· |
| Chapter | INT | NOT NULL | ç« èŠ‚å· |
| Content | TEXT | NOT NULL | æ•´ç« å†…å®¹ï¼ˆBase64ç¼–ç ï¼‰ |

**è®°å½•æ•°**: 1,189 æ¡

---

**è¡¨4: metadata** - å…ƒæ•°æ®è¡¨
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| name | TEXT | NOT NULL | å…ƒæ•°æ®é”®å |
| value | TEXT | NOT NULL | å…ƒæ•°æ®å€¼ |

**é‡è¦å…ƒæ•°æ®**:
- `id`: B13 (ç‰ˆæœ¬æ ‡è¯†)
- `date`: 20250403 (åˆ›å»ºæ—¥æœŸ)
- `lang`: å’Œåˆæœ¬ä¿®è®¢ç‰ˆ

---

**è¡¨5: Remark** - å¤‡æ³¨è¡¨
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| Book | INT | NOT NULL | ä¹¦å·ç¼–å· |
| Chapter | INT | NOT NULL | ç« èŠ‚å· |
| Verse | INT | NOT NULL | èŠ‚å· |
| Key | TEXT | NOT NULL | å¤‡æ³¨å…³é”®è¯ |
| Content | TEXT | NOT NULL | å¤‡æ³¨å†…å®¹ |

**è®°å½•æ•°**: 10 æ¡

---

#### history.db (å†å²è®°å½•æ•°æ®åº“)

**è¡¨: History** - æµè§ˆå†å²
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| Book | INT | NOT NULL | ä¹¦å·ç¼–å· |
| Chapter | INT | NOT NULL | ç« èŠ‚å· |
| Verse | INT | NOT NULL | èŠ‚å· |
| Timestamp | DATETIME | NOT NULL | è®¿é—®æ—¶é—´ |

---

**è¡¨: Favorites** - æ”¶è—å¤¹
| å­—æ®µå | ç±»å‹ | çº¦æŸ | è¯´æ˜ |
|--------|------|------|------|
| id | INTEGER | PRIMARY KEY | è‡ªå¢ä¸»é”® |
| Book | INT | NOT NULL | ä¹¦å·ç¼–å· |
| Chapter | INT | NOT NULL | ç« èŠ‚å· |
| Verse | INT | NOT NULL | èŠ‚å· |
| Note | TEXT | NULL | ç”¨æˆ·å¤‡æ³¨ |
| CreatedAt | DATETIME | NOT NULL | åˆ›å»ºæ—¶é—´ |

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. æ•°æ®è®¿é—®å±‚ (BibleDataService)

#### åŠŸèƒ½æ¸…å•
- âœ… æŸ¥è¯¢å•èŠ‚ç»æ–‡
- âœ… æŸ¥è¯¢æ•´ç« ç»æ–‡
- âœ… æŸ¥è¯¢ç« èŠ‚æ ‡é¢˜
- âœ… è·å–ä¹¦å·ç« èŠ‚æ•°
- âœ… å…¨æ–‡æœç´¢
- âœ… èŒƒå›´æŸ¥è¯¢ï¼ˆå¤šèŠ‚è¿ç»­ï¼‰

#### å…³é”®æ–¹æ³•

```csharp
// è·å–å•èŠ‚ç»æ–‡
public BibleVerse GetVerse(int bookId, int chapter, int verse)

// è·å–æ•´ç« ç»æ–‡
public List<BibleVerse> GetChapterVerses(int bookId, int chapter)

// è·å–ç« èŠ‚æ ‡é¢˜
public List<ChapterTitle> GetChapterTitles(int bookId, int chapter)

// è·å–ä¹¦å·ç« èŠ‚æ•°
public int GetChapterCount(int bookId)

// æœç´¢ç»æ–‡
public List<BibleVerse> SearchVerses(string keyword, int? bookId = null)

// è·å–è¿ç»­å¤šèŠ‚
public List<BibleVerse> GetVerseRange(int bookId, int chapter, int startVerse, int endVerse)
```

#### SQL æŸ¥è¯¢ç¤ºä¾‹

**æŸ¥è¯¢å•èŠ‚ç»æ–‡**:
```sql
SELECT id, Book, Chapter, Verse, Scripture 
FROM Bible 
WHERE Book = ? AND Chapter = ? AND Verse = ?
```

**æŸ¥è¯¢æ•´ç« ç»æ–‡**:
```sql
SELECT id, Book, Chapter, Verse, Scripture 
FROM Bible 
WHERE Book = ? AND Chapter = ? 
ORDER BY Verse
```

**å…¨æ–‡æœç´¢**:
```sql
SELECT id, Book, Chapter, Verse, Scripture 
FROM Bible 
WHERE Scripture LIKE '%å…³é”®è¯%' 
LIMIT 100
```

**ç»„åˆæŸ¥è¯¢ï¼ˆç»æ–‡+æ ‡é¢˜ï¼‰**:
```sql
SELECT 'title' as type, Verse, Scripture
FROM Titles
WHERE Book = ? AND Chapter = ?
UNION ALL
SELECT 'verse' as type, Verse, Scripture
FROM Bible
WHERE Book = ? AND Chapter = ?
ORDER BY Verse
```

---

### 2. ä¹¦å·ç®¡ç† (BookNameService)

#### ä¹¦å·ç¼–å·å¯¹ç…§è¡¨

**æ—§çº¦ (1-39)**

| ç¼–å· | ä¹¦å·å | ç®€ç§° | ç« æ•° | åˆ†ç±» |
|------|--------|------|------|------|
| 1 | åˆ›ä¸–è®° | åˆ› | 50 | æ‘©è¥¿äº”ç» |
| 2 | å‡ºåŸƒåŠè®° | å‡º | 40 | æ‘©è¥¿äº”ç» |
| 3 | åˆ©æœªè®° | åˆ© | 27 | æ‘©è¥¿äº”ç» |
| 4 | æ°‘æ•°è®° | æ°‘ | 36 | æ‘©è¥¿äº”ç» |
| 5 | ç”³å‘½è®° | ç”³ | 34 | æ‘©è¥¿äº”ç» |
| 6 | çº¦ä¹¦äºšè®° | ä¹¦ | 24 | å†å²ä¹¦ |
| 7 | å£«å¸ˆè®° | å£« | 21 | å†å²ä¹¦ |
| 8 | è·¯å¾—è®° | å¾— | 4 | å†å²ä¹¦ |
| 9 | æ’’æ¯è€³è®°ä¸Š | æ’’ä¸Š | 31 | å†å²ä¹¦ |
| 10 | æ’’æ¯è€³è®°ä¸‹ | æ’’ä¸‹ | 24 | å†å²ä¹¦ |
| 11 | åˆ—ç‹çºªä¸Š | ç‹ä¸Š | 22 | å†å²ä¹¦ |
| 12 | åˆ—ç‹çºªä¸‹ | ç‹ä¸‹ | 25 | å†å²ä¹¦ |
| 13 | å†ä»£å¿—ä¸Š | ä»£ä¸Š | 29 | å†å²ä¹¦ |
| 14 | å†ä»£å¿—ä¸‹ | ä»£ä¸‹ | 36 | å†å²ä¹¦ |
| 15 | ä»¥æ–¯æ‹‰è®° | æ‹‰ | 10 | å†å²ä¹¦ |
| 16 | å°¼å¸Œç±³è®° | å°¼ | 13 | å†å²ä¹¦ |
| 17 | ä»¥æ–¯å¸–è®° | æ–¯ | 10 | å†å²ä¹¦ |
| 18 | çº¦ä¼¯è®° | ä¼¯ | 42 | è¯—æ­Œæ™ºæ…§ä¹¦ |
| 19 | è¯—ç¯‡ | è¯— | 150 | è¯—æ­Œæ™ºæ…§ä¹¦ |
| 20 | ç®´è¨€ | ç®´ | 31 | è¯—æ­Œæ™ºæ…§ä¹¦ |
| 21 | ä¼ é“ä¹¦ | ä¼  | 12 | è¯—æ­Œæ™ºæ…§ä¹¦ |
| 22 | é›…æ­Œ | æ­Œ | 8 | è¯—æ­Œæ™ºæ…§ä¹¦ |
| 23 | ä»¥èµ›äºšä¹¦ | èµ› | 66 | å¤§å…ˆçŸ¥ä¹¦ |
| 24 | è€¶åˆ©ç±³ä¹¦ | è€¶ | 52 | å¤§å…ˆçŸ¥ä¹¦ |
| 25 | è€¶åˆ©ç±³å“€æ­Œ | å“€ | 5 | å¤§å…ˆçŸ¥ä¹¦ |
| 26 | ä»¥è¥¿ç»“ä¹¦ | ç»“ | 48 | å¤§å…ˆçŸ¥ä¹¦ |
| 27 | ä½†ä»¥ç†ä¹¦ | ä½† | 12 | å¤§å…ˆçŸ¥ä¹¦ |
| 28 | ä½•è¥¿é˜¿ä¹¦ | ä½• | 14 | å°å…ˆçŸ¥ä¹¦ |
| 29 | çº¦ç¥ä¹¦ | ç¥ | 3 | å°å…ˆçŸ¥ä¹¦ |
| 30 | é˜¿æ‘©å¸ä¹¦ | æ‘© | 9 | å°å…ˆçŸ¥ä¹¦ |
| 31 | ä¿„å·´åº•äºšä¹¦ | ä¿„ | 1 | å°å…ˆçŸ¥ä¹¦ |
| 32 | çº¦æ‹¿ä¹¦ | æ‹¿ | 4 | å°å…ˆçŸ¥ä¹¦ |
| 33 | å¼¥è¿¦ä¹¦ | å¼¥ | 7 | å°å…ˆçŸ¥ä¹¦ |
| 34 | é‚£é¸¿ä¹¦ | é¸¿ | 3 | å°å…ˆçŸ¥ä¹¦ |
| 35 | å“ˆå·´è°·ä¹¦ | å“ˆ | 3 | å°å…ˆçŸ¥ä¹¦ |
| 36 | è¥¿ç•ªé›…ä¹¦ | ç•ª | 3 | å°å…ˆçŸ¥ä¹¦ |
| 37 | å“ˆè¯¥ä¹¦ | è¯¥ | 2 | å°å…ˆçŸ¥ä¹¦ |
| 38 | æ’’è¿¦åˆ©äºšä¹¦ | äºš | 14 | å°å…ˆçŸ¥ä¹¦ |
| 39 | ç›æ‹‰åŸºä¹¦ | ç› | 4 | å°å…ˆçŸ¥ä¹¦ |

**æ–°çº¦ (40-66)**

| ç¼–å· | ä¹¦å·å | ç®€ç§° | ç« æ•° | åˆ†ç±» |
|------|--------|------|------|------|
| 40 | é©¬å¤ªç¦éŸ³ | å¤ª | 28 | ç¦éŸ³ä¹¦ |
| 41 | é©¬å¯ç¦éŸ³ | å¯ | 16 | ç¦éŸ³ä¹¦ |
| 42 | è·¯åŠ ç¦éŸ³ | è·¯ | 24 | ç¦éŸ³ä¹¦ |
| 43 | çº¦ç¿°ç¦éŸ³ | çº¦ | 21 | ç¦éŸ³ä¹¦ |
| 44 | ä½¿å¾’è¡Œä¼  | å¾’ | 28 | å†å²ä¹¦ |
| 45 | ç½—é©¬ä¹¦ | ç½— | 16 | ä¿ç½—ä¹¦ä¿¡ |
| 46 | å“¥æ—å¤šå‰ä¹¦ | æ—å‰ | 16 | ä¿ç½—ä¹¦ä¿¡ |
| 47 | å“¥æ—å¤šåä¹¦ | æ—å | 13 | ä¿ç½—ä¹¦ä¿¡ |
| 48 | åŠ æ‹‰å¤ªä¹¦ | åŠ  | 6 | ä¿ç½—ä¹¦ä¿¡ |
| 49 | ä»¥å¼—æ‰€ä¹¦ | å¼— | 6 | ä¿ç½—ä¹¦ä¿¡ |
| 50 | è…“ç«‹æ¯”ä¹¦ | è…“ | 4 | ä¿ç½—ä¹¦ä¿¡ |
| 51 | æ­Œç½—è¥¿ä¹¦ | è¥¿ | 4 | ä¿ç½—ä¹¦ä¿¡ |
| 52 | å¸–æ’’ç½—å°¼è¿¦å‰ä¹¦ | å¸–å‰ | 5 | ä¿ç½—ä¹¦ä¿¡ |
| 53 | å¸–æ’’ç½—å°¼è¿¦åä¹¦ | å¸–å | 3 | ä¿ç½—ä¹¦ä¿¡ |
| 54 | ææ‘©å¤ªå‰ä¹¦ | æå‰ | 6 | ä¿ç½—ä¹¦ä¿¡ |
| 55 | ææ‘©å¤ªåä¹¦ | æå | 4 | ä¿ç½—ä¹¦ä¿¡ |
| 56 | æå¤šä¹¦ | å¤š | 3 | ä¿ç½—ä¹¦ä¿¡ |
| 57 | è…“åˆ©é—¨ä¹¦ | é—¨ | 1 | ä¿ç½—ä¹¦ä¿¡ |
| 58 | å¸Œä¼¯æ¥ä¹¦ | æ¥ | 13 | æ™®é€šä¹¦ä¿¡ |
| 59 | é›…å„ä¹¦ | é›… | 5 | æ™®é€šä¹¦ä¿¡ |
| 60 | å½¼å¾—å‰ä¹¦ | å½¼å‰ | 5 | æ™®é€šä¹¦ä¿¡ |
| 61 | å½¼å¾—åä¹¦ | å½¼å | 3 | æ™®é€šä¹¦ä¿¡ |
| 62 | çº¦ç¿°ä¸€ä¹¦ | çº¦ä¸€ | 5 | æ™®é€šä¹¦ä¿¡ |
| 63 | çº¦ç¿°äºŒä¹¦ | çº¦äºŒ | 1 | æ™®é€šä¹¦ä¿¡ |
| 64 | çº¦ç¿°ä¸‰ä¹¦ | çº¦ä¸‰ | 1 | æ™®é€šä¹¦ä¿¡ |
| 65 | çŠ¹å¤§ä¹¦ | çŠ¹ | 1 | æ™®é€šä¹¦ä¿¡ |
| 66 | å¯ç¤ºå½• | å¯ | 22 | é¢„è¨€ä¹¦ |

---

### 3. MVVM æ¶æ„è®¾è®¡

#### MainViewModel (ä¸»çª—å£)

**å±æ€§**:
```csharp
// ä¹¦å·é›†åˆ
ObservableCollection<BookInfo> OldTestamentBooks
ObservableCollection<BookInfo> NewTestamentBooks

// ç« èŠ‚å’Œç»æ–‡
ObservableCollection<int> Chapters
ObservableCollection<BibleVerse> Verses

// é€‰ä¸­é¡¹
BookInfo SelectedBook
int? SelectedChapter
BibleVerse SelectedVerse

// æ˜¾ç¤ºä¿¡æ¯
string ChapterTitle
bool IsLoading
```

**å‘½ä»¤**:
```csharp
RelayCommand<BibleVerse> ProjectVerseCommand      // æŠ•å½±ç»æ–‡
RelayCommand PreviousVerseCommand                  // ä¸Šä¸€èŠ‚
RelayCommand NextVerseCommand                      // ä¸‹ä¸€èŠ‚
RelayCommand OpenSearchCommand                     // æ‰“å¼€æœç´¢
RelayCommand OpenSettingsCommand                   // æ‰“å¼€è®¾ç½®
RelayCommand OpenHistoryCommand                    // æ‰“å¼€å†å²
```

---

#### ProjectionViewModel (æŠ•å½±çª—å£)

**å±æ€§**:
```csharp
BibleVerse CurrentVerse                           // å½“å‰ç»æ–‡
string ChapterTitle                               // ç« èŠ‚æ ‡é¢˜
ProjectionSettings Settings                        // æŠ•å½±è®¾ç½®
```

**å‘½ä»¤**:
```csharp
RelayCommand NextVerseCommand                      // ä¸‹ä¸€èŠ‚
RelayCommand PreviousVerseCommand                  // ä¸Šä¸€èŠ‚
RelayCommand CloseCommand                          // å…³é—­æŠ•å½±
```

---

### 4. ç”¨æˆ·ç•Œé¢è®¾è®¡

#### ä¸»çª—å£å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â‰¡  åœ£ç»æŠ•å½±                                      âš™  â”‚ â† é¡¶éƒ¨èœå•æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                             â”‚
â”‚  æ—§çº¦â–¼   â”‚  åˆ›ä¸–è®° 1 ç«                     [ç« èŠ‚é€‰æ‹©å™¨] â”‚ â† ç« èŠ‚é€‰æ‹©å™¨
â”‚  åˆ›ä¸–è®°  â”‚                                             â”‚
â”‚  å‡ºåŸƒåŠè®°â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  åˆ©æœªè®°  â”‚  â”‚ åˆ›ä¸–è®°1ç«                             â”‚   â”‚
â”‚  ...     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚          â”‚  â”‚ 1 èµ·åˆã€€ç¥åˆ›é€ å¤©åœ°ã€‚                â”‚   â”‚ â† ç»æ–‡åˆ—è¡¨
â”‚  æ–°çº¦â–¼   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  é©¬å¤ªç¦éŸ³â”‚  â”‚ 2 åœ°æ˜¯ç©ºè™šæ··æ²Œï¼Œæ¸Šé¢é»‘æš—ï¼›          â”‚   â”‚
â”‚  é©¬å¯ç¦éŸ³â”‚  â”‚   ã€€ç¥çš„çµè¿è¡Œåœ¨æ°´é¢ä¸Šã€‚            â”‚   â”‚
â”‚  ...     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚          â”‚  â”‚ 3 ã€€ç¥è¯´ï¼š"è¦æœ‰å…‰"ï¼Œå°±æœ‰äº†å…‰ã€‚     â”‚   â”‚
â”‚  â”€â”€â”€â”€â”€â”€  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  å…¨ä¹¦    â”‚                                             â”‚
â”‚  å…¨ç«     â”‚  [â—€ ä¸Šä¸€èŠ‚]  [æŠ•å½±]  [ä¸‹ä¸€èŠ‚ â–¶]           â”‚ â† æ§åˆ¶æŒ‰é’®
â”‚  é«˜çº§åˆ†å±â”‚                                             â”‚
â”‚  æ˜¾å±    â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æŠ•å½±çª—å£å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                        â”‚
â”‚                                                        â”‚
â”‚                    åˆ›ä¸–è®°1ç«                            â”‚ â† ç« èŠ‚æ ‡é¢˜
â”‚                                                        â”‚
â”‚                                                        â”‚
â”‚    1    èµ·åˆã€€ç¥åˆ›é€ å¤©åœ°ã€‚                             â”‚ â† ç»æ–‡å†…å®¹
â”‚                                                        â”‚
â”‚                                                        â”‚
â”‚                                                        â”‚
â”‚                              æŒ‰ ESC é€€å‡ºæŠ•å½±           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. UI é…è‰²æ–¹æ¡ˆ

#### æ·±è‰²ä¸»é¢˜ (é»˜è®¤)

```xml
<Color x:Key="BackgroundColor">#FF1E1E1E</Color>           <!-- ä¸»èƒŒæ™¯ -->
<Color x:Key="SidebarColor">#FF2D2D30</Color>              <!-- ä¾§è¾¹æ  -->
<Color x:Key="HeaderColor">#FF007ACC</Color>               <!-- é¡¶éƒ¨æ  -->
<Color x:Key="AccentColor">#FF007ACC</Color>               <!-- å¼ºè°ƒè‰² -->
<Color x:Key="TitleColor">#FFFF9800</Color>                <!-- æ ‡é¢˜æ©™è‰² -->
<Color x:Key="TextColor">#FFFFFFFF</Color>                 <!-- ä¸»æ–‡å­—ç™½è‰² -->
<Color x:Key="SecondaryTextColor">#FFE0E0E0</Color>        <!-- æ¬¡è¦æ–‡å­— -->
<Color x:Key="BorderColor">#FF3E3E42</Color>               <!-- è¾¹æ¡†é¢œè‰² -->
<Color x:Key="HoverColor">#FF3E3E42</Color>                <!-- æ‚¬åœé¢œè‰² -->
<Color x:Key="SelectionColor">#FF094771</Color>            <!-- é€‰ä¸­é¢œè‰² -->
```

#### æµ…è‰²ä¸»é¢˜ (å¯é€‰)

```xml
<Color x:Key="BackgroundColor">#FFFFFFFF</Color>           <!-- ä¸»èƒŒæ™¯ -->
<Color x:Key="SidebarColor">#FFF5F5F5</Color>              <!-- ä¾§è¾¹æ  -->
<Color x:Key="HeaderColor">#FF0078D7</Color>               <!-- é¡¶éƒ¨æ  -->
<Color x:Key="AccentColor">#FF0078D7</Color>               <!-- å¼ºè°ƒè‰² -->
<Color x:Key="TitleColor">#FFF57C00</Color>                <!-- æ ‡é¢˜æ©™è‰² -->
<Color x:Key="TextColor">#FF000000</Color>                 <!-- ä¸»æ–‡å­—é»‘è‰² -->
<Color x:Key="SecondaryTextColor">#FF666666</Color>        <!-- æ¬¡è¦æ–‡å­— -->
<Color x:Key="BorderColor">#FFCCCCCC</Color>               <!-- è¾¹æ¡†é¢œè‰² -->
<Color x:Key="HoverColor">#FFE0E0E0</Color>                <!-- æ‚¬åœé¢œè‰² -->
<Color x:Key="SelectionColor">#FFCCE4F7</Color>            <!-- é€‰ä¸­é¢œè‰² -->
```

---

### 6. æŠ•å½±è®¾ç½®æ¨¡å‹

```csharp
public class ProjectionSettings
{
    // å­—ä½“è®¾ç½®
    public string FontFamily { get; set; } = "Microsoft YaHei";
    public int TitleFontSize { get; set; } = 48;
    public int VerseNumberFontSize { get; set; } = 80;
    public int TextFontSize { get; set; } = 80;
    
    // é¢œè‰²è®¾ç½®
    public string BackgroundColor { get; set; } = "#000000";
    public string TitleColor { get; set; } = "#FF9800";
    public string VerseNumberColor { get; set; } = "#FF9800";
    public string TextColor { get; set; } = "#FFFFFF";
    
    // èƒŒæ™¯è®¾ç½®
    public bool UseBackgroundImage { get; set; } = false;
    public string BackgroundImagePath { get; set; } = "";
    public double BackgroundOpacity { get; set; } = 0.3;
    
    // å¸ƒå±€è®¾ç½®
    public int MarginTop { get; set; } = 50;
    public int MarginBottom { get; set; } = 50;
    public int MarginLeft { get; set; } = 100;
    public int MarginRight { get; set; } = 100;
    public int LineHeight { get; set; } = 120;
    
    // æ˜¾ç¤ºè®¾ç½®
    public bool ShowChapterTitle { get; set; } = true;
    public bool ShowVerseNumber { get; set; } = true;
    public bool ShowReference { get; set; } = false;
    
    // å¤šæ˜¾ç¤ºå™¨è®¾ç½®
    public int TargetScreen { get; set; } = 1;
}
```

---

## âŒ¨ï¸ é”®ç›˜å¿«æ·é”®

### ä¸»çª—å£å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Ctrl + F` | æ‰“å¼€æœç´¢çª—å£ |
| `Ctrl + H` | æ‰“å¼€å†å²è®°å½• |
| `Ctrl + D` | æ·»åŠ åˆ°æ”¶è—å¤¹ |
| `Ctrl + ,` | æ‰“å¼€è®¾ç½® |
| `Space` | æŠ•å½±å½“å‰é€‰ä¸­ç»æ–‡ |
| `â†‘` | ä¸Šä¸€èŠ‚ |
| `â†“` | ä¸‹ä¸€èŠ‚ |
| `Page Up` | ä¸Šä¸€ç«  |
| `Page Down` | ä¸‹ä¸€ç«  |
| `Home` | è·³è½¬åˆ°ç¬¬1èŠ‚ |
| `End` | è·³è½¬åˆ°æœ€åä¸€èŠ‚ |

### æŠ•å½±çª—å£å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `ESC` | é€€å‡ºæŠ•å½± |
| `Space` / `â†’` | ä¸‹ä¸€èŠ‚ |
| `Backspace` / `â†` | ä¸Šä¸€èŠ‚ |
| `F11` | åˆ‡æ¢å…¨å± |
| `B` | é»‘å± |
| `W` | ç™½å± |

---

## ğŸ”§ é«˜çº§åŠŸèƒ½å®ç°

### 1. æœç´¢åŠŸèƒ½

#### æœç´¢ç±»å‹
- âœ… å…¨æ–‡æœç´¢
- âœ… ä¹¦å·å†…æœç´¢
- âœ… ç²¾ç¡®åŒ¹é…
- âœ… æ¨¡ç³ŠåŒ¹é…
- âœ… æœç´¢å†å²

#### å®ç°ç¤ºä¾‹

```csharp
public class SearchService
{
    private readonly BibleDataService _dataService;
    
    // å…¨æ–‡æœç´¢
    public List<SearchResult> SearchAll(string keyword)
    {
        return _dataService.SearchVerses(keyword);
    }
    
    // ä¹¦å·å†…æœç´¢
    public List<SearchResult> SearchInBook(string keyword, int bookId)
    {
        return _dataService.SearchVerses(keyword, bookId);
    }
    
    // é«˜çº§æœç´¢ï¼ˆæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼‰
    public List<SearchResult> AdvancedSearch(SearchCriteria criteria)
    {
        // å®ç°é«˜çº§æœç´¢é€»è¾‘
    }
}
```

---

### 2. å†å²è®°å½•

#### åŠŸèƒ½ç‰¹æ€§
- è‡ªåŠ¨è®°å½•æµè§ˆè¿‡çš„ç»æ–‡
- æŒ‰æ—¶é—´å€’åºæ’åˆ—
- æ”¯æŒåˆ é™¤å’Œæ¸…ç©º
- é™åˆ¶æœ€å¤§è®°å½•æ•°ï¼ˆé»˜è®¤100æ¡ï¼‰

#### æ•°æ®åº“æ“ä½œ

```csharp
// æ·»åŠ å†å²è®°å½•
public void AddHistory(int bookId, int chapter, int verse)
{
    using (var connection = new SQLiteConnection(_connectionString))
    {
        connection.Open();
        var command = new SQLiteCommand(
            "INSERT INTO History (Book, Chapter, Verse, Timestamp) " +
            "VALUES (@book, @chapter, @verse, @timestamp)", connection);
        
        command.Parameters.AddWithValue("@book", bookId);
        command.Parameters.AddWithValue("@chapter", chapter);
        command.Parameters.AddWithValue("@verse", verse);
        command.Parameters.AddWithValue("@timestamp", DateTime.Now);
        
        command.ExecuteNonQuery();
    }
}

// è·å–å†å²è®°å½•
public List<HistoryItem> GetHistory(int limit = 100)
{
    var history = new List<HistoryItem>();
    
    using (var connection = new SQLiteConnection(_connectionString))
    {
        connection.Open();
        var command = new SQLiteCommand(
            "SELECT Book, Chapter, Verse, Timestamp " +
            "FROM History " +
            "ORDER BY Timestamp DESC " +
            "LIMIT @limit", connection);
        
        command.Parameters.AddWithValue("@limit", limit);
        
        using (var reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                history.Add(new HistoryItem
                {
                    Book = reader.GetInt32(0),
                    Chapter = reader.GetInt32(1),
                    Verse = reader.GetInt32(2),
                    Timestamp = reader.GetDateTime(3)
                });
            }
        }
    }
    
    return history;
}
```

---

### 3. æ”¶è—å¤¹

#### åŠŸèƒ½ç‰¹æ€§
- æ”¶è—å¸¸ç”¨ç»æ–‡
- æ·»åŠ ä¸ªäººå¤‡æ³¨
- åˆ†ç±»ç®¡ç†
- å¯¼å‡º/å¯¼å…¥åŠŸèƒ½

#### å®ç°ç¤ºä¾‹

```csharp
public class FavoriteService
{
    // æ·»åŠ æ”¶è—
    public void AddFavorite(int bookId, int chapter, int verse, string note = "")
    {
        // æ’å…¥æ”¶è—è®°å½•
    }
    
    // ç§»é™¤æ”¶è—
    public void RemoveFavorite(int favoriteId)
    {
        // åˆ é™¤æ”¶è—è®°å½•
    }
    
    // æ›´æ–°å¤‡æ³¨
    public void UpdateNote(int favoriteId, string note)
    {
        // æ›´æ–°å¤‡æ³¨å†…å®¹
    }
    
    // è·å–æ‰€æœ‰æ”¶è—
    public List<FavoriteItem> GetAllFavorites()
    {
        // æŸ¥è¯¢æ‰€æœ‰æ”¶è—
    }
}
```

---

### 4. å¤šæ˜¾ç¤ºå™¨æ”¯æŒ

#### åŠŸèƒ½è¯´æ˜
- è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰æ˜¾ç¤ºå™¨
- é€‰æ‹©ç›®æ ‡æŠ•å½±æ˜¾ç¤ºå™¨
- æ”¯æŒæ‰©å±•æ¨¡å¼å’Œé•œåƒæ¨¡å¼

#### å®ç°ä»£ç 

```csharp
using System.Windows.Forms;

public class ScreenManager
{
    // è·å–æ‰€æœ‰å±å¹•
    public static List<Screen> GetAllScreens()
    {
        return Screen.AllScreens.ToList();
    }
    
    // è·å–ä¸»å±å¹•
    public static Screen GetPrimaryScreen()
    {
        return Screen.PrimaryScreen;
    }
    
    // åœ¨æŒ‡å®šå±å¹•æ˜¾ç¤ºçª—å£
    public static void ShowOnScreen(Window window, int screenIndex)
    {
        var screens = Screen.AllScreens;
        if (screenIndex >= 0 && screenIndex < screens.Length)
        {
            var screen = screens[screenIndex];
            window.Left = screen.WorkingArea.Left;
            window.Top = screen.WorkingArea.Top;
            window.Width = screen.WorkingArea.Width;
            window.Height = screen.WorkingArea.Height;
            window.WindowState = WindowState.Maximized;
        }
    }
}
```

---

## ğŸ“¦ NuGet åŒ…ä¾èµ–è¯¦ç»†è¯´æ˜

### 1. System.Data.SQLite (v1.0.118)

**ç”¨é€”**: SQLite æ•°æ®åº“è®¿é—®

**å®‰è£…å‘½ä»¤**:
```powershell
Install-Package System.Data.SQLite
```

**åŸºæœ¬ç”¨æ³•**:
```csharp
using System.Data.SQLite;

var connectionString = "Data Source=bible.db;Version=3;";
using (var connection = new SQLiteConnection(connectionString))
{
    connection.Open();
    var command = new SQLiteCommand("SELECT * FROM Bible", connection);
    using (var reader = command.ExecuteReader())
    {
        while (reader.Read())
        {
            // å¤„ç†æ•°æ®
        }
    }
}
```

---

### 2. CommunityToolkit.Mvvm (v8.2.2)

**ç”¨é€”**: MVVM æ¡†æ¶ï¼Œæä¾› ObservableObjectã€RelayCommand ç­‰

**å®‰è£…å‘½ä»¤**:
```powershell
Install-Package CommunityToolkit.Mvvm
```

**åŸºæœ¬ç”¨æ³•**:
```csharp
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;

public partial class MainViewModel : ObservableObject
{
    [ObservableProperty]
    private string _title;
    
    [RelayCommand]
    private void DoSomething()
    {
        // å‘½ä»¤é€»è¾‘
    }
}
```

---

### 3. MaterialDesignThemes (v4.9.0)

**ç”¨é€”**: Material Design UI æ§ä»¶åº“

**å®‰è£…å‘½ä»¤**:
```powershell
Install-Package MaterialDesignThemes
Install-Package MaterialDesignColors
```

**é…ç½® App.xaml**:
```xml
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <materialDesign:BundledTheme BaseTheme="Dark" 
                                        PrimaryColor="Blue" 
                                        SecondaryColor="Orange" />
            <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources>
```

**åŸºæœ¬ç”¨æ³•**:
```xml
<Button Style="{StaticResource MaterialDesignRaisedButton}" 
        Content="æŠ•å½±" />

<TextBox materialDesign:HintAssist.Hint="æœç´¢ç»æ–‡" 
         Style="{StaticResource MaterialDesignOutlinedTextBox}" />
```

---

### 4. Microsoft.Extensions.DependencyInjection (v7.0.0)

**ç”¨é€”**: ä¾èµ–æ³¨å…¥å®¹å™¨

**å®‰è£…å‘½ä»¤**:
```powershell
Install-Package Microsoft.Extensions.DependencyInjection
```

**é…ç½®ç¤ºä¾‹ (App.xaml.cs)**:
```csharp
private ServiceProvider _serviceProvider;

protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);
    
    var services = new ServiceCollection();
    
    // æ³¨å†ŒæœåŠ¡
    services.AddSingleton(new BibleDataService("Data/bible.db"));
    services.AddSingleton<BookNameService>();
    services.AddSingleton<SearchService>();
    
    // æ³¨å†Œ ViewModels
    services.AddSingleton<MainViewModel>();
    services.AddTransient<ProjectionViewModel>();
    
    // æ³¨å†Œ Views
    services.AddSingleton<MainWindow>();
    
    _serviceProvider = services.BuildServiceProvider();
    
    var mainWindow = _serviceProvider.GetRequiredService<MainWindow>();
    mainWindow.Show();
}
```

---

## ğŸš€ éƒ¨ç½²å’Œå‘å¸ƒ

### 1. å‘å¸ƒé…ç½®

**å‘å¸ƒæ¨¡å¼**: 
- **Self-Contained**: åŒ…å« .NET è¿è¡Œæ—¶ï¼ˆæ¨èï¼‰
- **Framework-Dependent**: éœ€è¦ç”¨æˆ·å®‰è£… .NET è¿è¡Œæ—¶

**ç›®æ ‡å¹³å°**: `win-x64` æˆ– `win-x86`

**å‘å¸ƒå‘½ä»¤**:
```powershell
# Self-Contained å‘å¸ƒ
dotnet publish -c Release -r win-x64 --self-contained true -p:PublishSingleFile=true

# Framework-Dependent å‘å¸ƒ
dotnet publish -c Release -r win-x64 --self-contained false
```

---

### 2. åº”ç”¨ç¨‹åºæ¸…å• (app.manifest)

```xml
<?xml version="1.0" encoding="utf-8"?>
<assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1">
  <assemblyIdentity version="1.0.0.0" name="BibleProjector.app"/>
  
  <!-- è®¾ç½® DPI æ„ŸçŸ¥ -->
  <application xmlns="urn:schemas-microsoft-com:asm.v3">
    <windowsSettings>
      <dpiAware xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">true</dpiAware>
      <dpiAwareness xmlns="http://schemas.microsoft.com/SMI/2016/WindowsSettings">PerMonitorV2</dpiAwareness>
    </windowsSettings>
  </application>
  
  <!-- ç®¡ç†å‘˜æƒé™ï¼ˆå¦‚æœéœ€è¦ï¼‰ -->
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <requestedExecutionLevel level="asInvoker" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly>
```

---

### 3. å®‰è£…ç¨‹åºåˆ¶ä½œ

**æ¨èå·¥å…·**:
- **Inno Setup**: å…è´¹ã€åŠŸèƒ½å¼ºå¤§
- **WiX Toolset**: åŸºäº XML çš„å®‰è£…åŒ…åˆ¶ä½œå·¥å…·
- **Advanced Installer**: å•†ä¸šè½¯ä»¶ï¼Œç•Œé¢å‹å¥½

**Inno Setup è„šæœ¬ç¤ºä¾‹**:
```iss
[Setup]
AppName=åœ£ç»æŠ•å½±
AppVersion=1.0.0
DefaultDirName={pf}\BibleProjector
DefaultGroupName=åœ£ç»æŠ•å½±
OutputDir=Output
OutputBaseFilename=BibleProjector_Setup
Compression=lzma2
SolidCompression=yes

[Files]
Source: "publish\*"; DestDir: "{app}"; Flags: recursesubdirs

[Icons]
Name: "{group}\åœ£ç»æŠ•å½±"; Filename: "{app}\BibleProjector.exe"
Name: "{commondesktop}\åœ£ç»æŠ•å½±"; Filename: "{app}\BibleProjector.exe"

[Run]
Filename: "{app}\BibleProjector.exe"; Description: "å¯åŠ¨åœ£ç»æŠ•å½±"; Flags: nowait postinstall skipifsilent
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®åº“ä¼˜åŒ–

#### åˆ›å»ºç´¢å¼•
```sql
-- ç»æ–‡è¡¨ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_bible_book_chapter 
ON Bible(Book, Chapter);

CREATE INDEX IF NOT EXISTS idx_bible_book_chapter_verse 
ON Bible(Book, Chapter, Verse);

-- å…¨æ–‡æœç´¢ç´¢å¼•ï¼ˆå¦‚æœæ•°æ®åº“æ”¯æŒï¼‰
CREATE VIRTUAL TABLE IF NOT EXISTS bible_fts 
USING fts5(Scripture, content='Bible');
```

#### ä½¿ç”¨äº‹åŠ¡
```csharp
using (var transaction = connection.BeginTransaction())
{
    try
    {
        // æ‰¹é‡æ“ä½œ
        transaction.Commit();
    }
    catch
    {
        transaction.Rollback();
        throw;
    }
}
```

---

### 2. UI æ€§èƒ½ä¼˜åŒ–

#### è™šæ‹ŸåŒ–åˆ—è¡¨
```xml
<ListBox VirtualizingPanel.IsVirtualizing="True"
         VirtualizingPanel.VirtualizationMode="Recycling">
    <!-- å†…å®¹ -->
</ListBox>
```

#### å¼‚æ­¥åŠ è½½æ•°æ®
```csharp
[RelayCommand]
private async Task LoadVersesAsync()
{
    IsLoading = true;
    
    await Task.Run(() =>
    {
        var verses = _dataService.GetChapterVerses(SelectedBook.Id, SelectedChapter.Value);
        
        Application.Current.Dispatcher.Invoke(() =>
        {
            Verses.Clear();
            foreach (var verse in verses)
            {
                Verses.Add(verse);
            }
        });
    });
    
    IsLoading = false;
}
```

#### å»¶è¿ŸåŠ è½½
```csharp
// ä½¿ç”¨ Lazy<T> å»¶è¿Ÿåˆå§‹åŒ–
private Lazy<BookNameService> _bookNameService = 
    new Lazy<BookNameService>(() => new BookNameService());

public BookNameService BookNameService => _bookNameService.Value;
```

---

### 3. å†…å­˜ä¼˜åŒ–

#### åŠæ—¶é‡Šæ”¾èµ„æº
```csharp
// ä½¿ç”¨ using è¯­å¥è‡ªåŠ¨é‡Šæ”¾
using (var connection = new SQLiteConnection(connectionString))
using (var command = new SQLiteCommand(sql, connection))
{
    // æ•°æ®åº“æ“ä½œ
}
```

#### å›¾ç‰‡ç¼“å­˜
```csharp
private static Dictionary<string, BitmapImage> _imageCache = new();

public BitmapImage LoadImage(string path)
{
    if (!_imageCache.ContainsKey(path))
    {
        var image = new BitmapImage(new Uri(path));
        image.Freeze(); // å†»ç»“ä»¥å…è®¸è·¨çº¿ç¨‹è®¿é—®
        _imageCache[path] = image;
    }
    
    return _imageCache[path];
}
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•

**æµ‹è¯•æ¡†æ¶**: xUnit æˆ– NUnit

**ç¤ºä¾‹æµ‹è¯•**:
```csharp
[Fact]
public void GetVerse_ValidInput_ReturnsVerse()
{
    // Arrange
    var service = new BibleDataService("test_bible.db");
    
    // Act
    var verse = service.GetVerse(1, 1, 1);
    
    // Assert
    Assert.NotNull(verse);
    Assert.Equal(1, verse.Book);
    Assert.Equal(1, verse.Chapter);
    Assert.Equal(1, verse.Verse);
    Assert.Contains("èµ·åˆ", verse.Scripture);
}
```

---

### 2. é›†æˆæµ‹è¯•

**æµ‹è¯•æ•°æ®åº“è¿æ¥**:
```csharp
[Fact]
public void DatabaseConnection_CanConnect()
{
    // Arrange
    var connectionString = "Data Source=bible.db;Version=3;";
    
    // Act & Assert
    using (var connection = new SQLiteConnection(connectionString))
    {
        Assert.DoesNotThrow(() => connection.Open());
    }
}
```

---

### 3. UI æµ‹è¯•

**ä½¿ç”¨ FlaUI è¿›è¡Œ UI è‡ªåŠ¨åŒ–æµ‹è¯•**:
```csharp
[Fact]
public void MainWindow_OpenAndSelectBook()
{
    using (var app = Application.Launch("BibleProjector.exe"))
    using (var automation = new UIA3Automation())
    {
        var mainWindow = app.GetMainWindow(automation);
        Assert.NotNull(mainWindow);
        
        var bookList = mainWindow.FindFirstDescendant(cf => cf.ByAutomationId("BookList"));
        Assert.NotNull(bookList);
    }
}
```

---

## ğŸ“š æ‰©å±•åŠŸèƒ½å»ºè®®

### 1. å¤šç‰ˆæœ¬å¯¹ç…§

**åŠŸèƒ½æè¿°**: åŒæ—¶æ˜¾ç¤ºå¤šä¸ªåœ£ç»ç‰ˆæœ¬ï¼ˆå’Œåˆæœ¬ã€æ–°è¯‘æœ¬ã€å•æŒ¯ä¸­è¯‘æœ¬ç­‰ï¼‰

**å®ç°æ€è·¯**:
- æ‰©å±•æ•°æ®åº“ï¼Œæ”¯æŒå¤šç‰ˆæœ¬
- UI æ˜¾ç¤ºå¹¶æ’å¯¹ç…§
- æ”¯æŒç‰ˆæœ¬åˆ‡æ¢

---

### 2. ç»æ–‡æœ—è¯»

**åŠŸèƒ½æè¿°**: TTS è¯­éŸ³æœ—è¯»ç»æ–‡

**å®ç°ç¤ºä¾‹**:
```csharp
using System.Speech.Synthesis;

public class TextToSpeechService
{
    private SpeechSynthesizer _synthesizer;
    
    public TextToSpeechService()
    {
        _synthesizer = new SpeechSynthesizer();
        _synthesizer.SelectVoiceByHints(VoiceGender.Female, VoiceAge.Adult);
    }
    
    public void Speak(string text)
    {
        _synthesizer.SpeakAsync(text);
    }
    
    public void Stop()
    {
        _synthesizer.SpeakAsyncCancelAll();
    }
}
```

---

### 3. ç»æ–‡åˆ†äº«

**åŠŸèƒ½æè¿°**: ç”Ÿæˆç»æ–‡å›¾ç‰‡ï¼Œåˆ†äº«åˆ°ç¤¾äº¤åª’ä½“

**å®ç°æ€è·¯**:
- ä½¿ç”¨ RenderTargetBitmap ç”Ÿæˆå›¾ç‰‡
- æ·»åŠ æ°´å°å’Œæ ·å¼
- å¯¼å‡ºä¸º PNG/JPG

---

### 4. åœ£ç»å­¦ä¹ å·¥å…·

**åŠŸèƒ½æè¿°**:
- ç»æ–‡ç¬”è®°å’Œæ‰¹æ³¨
- è¯»ç»è®¡åˆ’
- ç»æ–‡èƒŒè¯µ
- è¯æ±‡æŸ¥è¯¢ï¼ˆå¸Œä¼¯æ¥æ–‡/å¸Œè…Šæ–‡ï¼‰

---

## ğŸ”’ å®‰å…¨æ€§å’Œéšç§

### 1. æ•°æ®ä¿æŠ¤

- ç”¨æˆ·ç¬”è®°å’Œè®¾ç½®é‡‡ç”¨æœ¬åœ°å­˜å‚¨
- ä¸æ”¶é›†ç”¨æˆ·éšç§æ•°æ®
- æ”¯æŒæ•°æ®å¯¼å‡ºå¤‡ä»½

### 2. æ›´æ–°æœºåˆ¶

- è‡ªåŠ¨æ£€æŸ¥æ›´æ–°
- å®‰å…¨çš„æ›´æ–°ä¸‹è½½ï¼ˆHTTPSï¼‰
- ç‰ˆæœ¬å›æ»šæ”¯æŒ

---

## ğŸ“– ç”¨æˆ·æ‰‹å†Œ

### å¿«é€Ÿå…¥é—¨

#### 1. å®‰è£…åº”ç”¨
- è¿è¡Œå®‰è£…ç¨‹åº
- é€‰æ‹©å®‰è£…è·¯å¾„
- å®Œæˆå®‰è£…

#### 2. é€‰æ‹©ç»æ–‡
- åœ¨å·¦ä¾§é€‰æ‹©ä¹¦å·
- é€‰æ‹©ç« èŠ‚
- ç‚¹å‡»ç»æ–‡

#### 3. æŠ•å½±æ˜¾ç¤º
- ç‚¹å‡»"æŠ•å½±"æŒ‰é’®
- ç»æ–‡æ˜¾ç¤ºåœ¨æŠ•å½±çª—å£
- ä½¿ç”¨æ–¹å‘é”®åˆ‡æ¢ç»æ–‡
- æŒ‰ ESC é€€å‡ºæŠ•å½±

---

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### Q1: æ•°æ®åº“æ–‡ä»¶æ‰¾ä¸åˆ°

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// ç¡®ä¿æ•°æ®åº“æ–‡ä»¶è·¯å¾„æ­£ç¡®
var appPath = AppDomain.CurrentDomain.BaseDirectory;
var dbPath = Path.Combine(appPath, "Data", "bible.db");

if (!File.Exists(dbPath))
{
    throw new FileNotFoundException("æ•°æ®åº“æ–‡ä»¶æœªæ‰¾åˆ°", dbPath);
}
```

### Q2: ä¸­æ–‡æ˜¾ç¤ºä¹±ç 

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿æ•°æ®åº“ç¼–ç ä¸º UTF-8
- åœ¨è¿æ¥å­—ç¬¦ä¸²ä¸­æŒ‡å®šç¼–ç ï¼š
```csharp
var connectionString = "Data Source=bible.db;Version=3;UseUTF16Encoding=True;";
```

### Q3: æŠ•å½±çª—å£æ— æ³•å…¨å±

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// ç¡®ä¿çª—å£æ ·å¼è®¾ç½®æ­£ç¡®
WindowState = WindowState.Maximized;
WindowStyle = WindowStyle.None;
Topmost = true;
```

---

## ğŸ“ å¼€å‘æ—¥å¿—å’Œç‰ˆæœ¬è§„åˆ’

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… åŸºç¡€ç»æ–‡æµè§ˆåŠŸèƒ½
- âœ… æŠ•å½±æ˜¾ç¤ºåŠŸèƒ½
- âœ… ä¹¦å·ç« èŠ‚å¯¼èˆª
- âœ… æ·±è‰²ä¸»é¢˜

### v1.1.0 (è®¡åˆ’ä¸­)
- ğŸ”² æœç´¢åŠŸèƒ½
- ğŸ”² å†å²è®°å½•
- ğŸ”² æ”¶è—å¤¹
- ğŸ”² æµ…è‰²ä¸»é¢˜

### v1.2.0 (è®¡åˆ’ä¸­)
- ğŸ”² å¤šç‰ˆæœ¬å¯¹ç…§
- ğŸ”² ç»æ–‡æœ—è¯»
- ğŸ”² è‡ªå®šä¹‰æŠ•å½±æ ·å¼
- ğŸ”² å¯¼å‡ºåŠŸèƒ½

### v2.0.0 (è¿œæœŸè§„åˆ’)
- ğŸ”² åœ£ç»å­¦ä¹ å·¥å…·
- ğŸ”² è¯»ç»è®¡åˆ’
- ğŸ”² è¯æ±‡æŸ¥è¯¢
- ğŸ”² äº‘ç«¯åŒæ­¥

---

## ğŸ‘¥ è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª C# å‘½åè§„èŒƒ
- ä½¿ç”¨ XAML è¿›è¡Œ UI è®¾è®¡
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- ç¼–å†™å•å…ƒæµ‹è¯•

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ LICENSE æ–‡ä»¶ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**: [GitHub Repository]
- **é—®é¢˜åé¦ˆ**: [GitHub Issues]
- **é‚®ç®±**: [your-email@example.com]

---

## ğŸ™ è‡´è°¢

- åœ£ç»æ•°æ®æ¥æºï¼šå’Œåˆæœ¬ä¿®è®¢ç‰ˆ (B13)
- UI æ¡†æ¶ï¼šMaterialDesignInXAML
- å¼€å‘å·¥å…·ï¼šVisual Studio 2022
- ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…

---

**æœ€åæ›´æ–°**: 2025-04-03  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ä½œè€…**: BibleProjector å¼€å‘å›¢é˜Ÿ

---

## é™„å½•

### A. å®Œæ•´çš„ .csproj é…ç½®

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net7.0-windows</TargetFramework>
    <UseWPF>true</UseWPF>
    <ApplicationIcon>icon.ico</ApplicationIcon>
    <AssemblyName>BibleProjector</AssemblyName>
    <RootNamespace>BibleProjector.UI</RootNamespace>
    <Version>1.0.0</Version>
    <Authors>Your Name</Authors>
    <Company>Your Company</Company>
    <Product>åœ£ç»æŠ•å½±</Product>
    <Description>ä¸“ä¸šçš„åœ£ç»ç»æ–‡æŠ•å½±åº”ç”¨</Description>
    <Copyright>Copyright Â© 2025</Copyright>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="System.Data.SQLite" Version="1.0.118" />
    <PackageReference Include="CommunityToolkit.Mvvm" Version="8.2.2" />
    <PackageReference Include="MaterialDesignThemes" Version="4.9.0" />
    <PackageReference Include="MaterialDesignColors" Version="2.1.4" />
    <PackageReference Include="Microsoft.Extensions.DependencyInjection" Version="7.0.0" />
  </ItemGroup>

  <ItemGroup>
    <None Update="Data\bible.db">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
</Project>
```

### B. App.config é…ç½®

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
    <add key="DatabasePath" value="Data/bible.db"/>
    <add key="HistoryDatabasePath" value="Data/history.db"/>
    <add key="MaxHistoryItems" value="100"/>
    <add key="DefaultFontSize" value="80"/>
    <add key="DefaultTheme" value="Dark"/>
  </appSettings>
  
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite"/>
      <add name="SQLite Data Provider" 
           invariant="System.Data.SQLite" 
           description=".NET Framework Data Provider for SQLite" 
           type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite"/>
    </DbProviderFactories>
  </system.data>
</configuration>
```

---

**ç¥æ‚¨å¼€å‘é¡ºåˆ©ï¼ğŸ‰**

