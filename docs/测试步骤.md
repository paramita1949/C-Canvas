# Canvas Cast C# 测试步骤

## 🧪 基础功能测试

### 1. 图片加载测试

#### 测试步骤
1. 点击"导入"按钮
2. 选择一张测试图片（建议PNG或JPG）
3. 验证图片是否正确显示

#### 预期结果
- ✅ 图片居中显示
- ✅ 标题栏显示"✅ 已加载：文件名"
- ✅ 滚动条正确显示/隐藏

### 2. 原图模式测试

#### 测试步骤（拉伸模式）
1. 加载一张测试图片
2. 点击"原图"按钮
3. 验证显示效果

#### 预期结果
- ✅ 按钮变为浅绿色
- ✅ 图片宽度填满画布
- ✅ 图片高度按比例缩放
- ✅ 图片水平和垂直居中
- ✅ 如果图片高度超过画布，显示滚动条

#### 测试步骤（适中模式）
1. 在原图模式下
2. 右键点击画布（如果有菜单）或通过代码切换
3. 设置 `OriginalDisplayMode.Fit`

#### 预期结果
- ✅ 图片等比缩放
- ✅ 完整显示在画布内
- ✅ 保持居中对齐

### 3. 正常模式测试

#### 测试步骤
1. 在原图模式下点击"原图"按钮（切换回正常模式）
2. 验证显示效果

#### 预期结果
- ✅ 按钮恢复默认颜色
- ✅ 图片宽度适应画布
- ✅ 图片高度按原始比例缩放
- ✅ 水平居中，垂直顶部对齐

### 4. 缩放功能测试

#### 测试步骤
1. 加载图片
2. 按住Ctrl + 鼠标滚轮向上（放大）
3. 按住Ctrl + 鼠标滚轮向下（缩小）
4. 双击图片（重置缩放）

#### 预期结果
- ✅ 图片正确放大/缩小
- ✅ 缩放范围：0.1x - 10x
- ✅ 双击后恢复适应视图大小
- ✅ 缩放时滚动条正确显示

### 5. 滚动功能测试

#### 测试步骤
1. 加载一张高度大于窗口的图片
2. 使用鼠标滚轮滚动
3. 拖动滚动条
4. 点击"返回"按钮

#### 预期结果
- ✅ 鼠标滚轮正常滚动
- ✅ 滚动条正确显示
- ✅ 点击"返回"后滚动到顶部

### 6. 变色效果测试

#### 测试步骤
1. 加载一张图片
2. 点击"变色"按钮
3. 验证效果

#### 预期结果
- ✅ 按钮变为浅绿色
- ✅ 图片应用GPU变色效果
- ✅ 标题显示"✨ 已应用颜色效果 (GPU加速)"

### 7. 窗口调整测试

#### 测试步骤
1. 加载图片
2. 调整窗口大小
3. 最小化/最大化窗口

#### 预期结果
- ✅ 图片自动适应新窗口大小
- ✅ 保持正确的对齐方式
- ✅ 滚动条正确更新

## 🔧 边界情况测试

### 测试用例1：超大图片
- **文件**：>50MB的高分辨率图片
- **预期**：正常加载，性能流畅

### 测试用例2：极小图片
- **文件**：<100KB的小图片
- **预期**：正确显示，智能放大

### 测试用例3：极端比例
- **文件**：超宽或超高的图片（比例>10:1）
- **预期**：正确缩放和显示

### 测试用例4：多次切换
- **操作**：快速切换原图模式/正常模式
- **预期**：无闪烁，无内存泄漏

### 测试用例5：不同格式
- **文件**：PNG, JPG, BMP, GIF等
- **预期**：所有格式都能正确加载

## 📊 性能测试

### 缓存测试
```csharp
// 加载多张图片，验证缓存是否工作
1. 加载图片A
2. 加载图片B
3. 重新加载图片A（应该从缓存读取）
4. 检查内存使用
```

### 内存测试
```csharp
// 连续加载多张大图片
1. 加载10张大图片
2. 检查任务管理器的内存使用
3. 验证旧图片是否被正确释放
```

## 🐛 已知问题

### 待解决
- [ ] 变色效果需要集成GPU处理器
- [ ] 关键帧功能尚未实现
- [ ] 投影功能需要完善
- [ ] 缓存策略可以优化（使用更智能的LRU）

## ✅ 测试清单

### 基础功能
- [ ] 图片加载
- [ ] 原图模式（拉伸）
- [ ] 原图模式（适中）
- [ ] 正常模式
- [ ] 缩放功能
- [ ] 滚动功能
- [ ] 变色效果
- [ ] 窗口调整

### 边界情况
- [ ] 超大图片
- [ ] 极小图片
- [ ] 极端比例
- [ ] 快速切换
- [ ] 多种格式

### 性能
- [ ] 缓存测试
- [ ] 内存测试
- [ ] 响应速度

## 📝 测试报告模板

```markdown
## 测试日期：YYYY-MM-DD

### 测试环境
- 操作系统：Windows 11
- .NET版本：8.0
- 显卡：NVIDIA/AMD/Intel

### 测试结果
| 功能 | 状态 | 备注 |
|-----|------|-----|
| 图片加载 | ✅/❌ |  |
| 原图模式 | ✅/❌ |  |
| 缩放功能 | ✅/❌ |  |
| 滚动功能 | ✅/❌ |  |
| 变色效果 | ✅/❌ |  |

### 发现的问题
1. 

### 建议改进
1. 
```

---

**测试重点**：
1. 图片显示逻辑的正确性
2. 原图模式的两种显示方式
3. 滚动区域的自动设置
4. 性能和内存使用

